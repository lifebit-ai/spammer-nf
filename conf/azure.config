params {
    autopool_auto_scale = true
    autopool_instance_type = 'Standard_D4s_v3'
    autopool_vm_count = 1
    autopool_max_vm_count = 50
    spot = true

    copyToolInstallMode = 'task'
    //or 'node"
}

azure {
    batch {
        copyToolInstallMode = params.copyToolInstallMode
        pools {
            spammer_pool {
                autoScale = params.autopool_auto_scale
                vmType = params.autopool_instance_type
                vmCount = params.autopool_vm_count
                maxVmCount = params.autopool_max_vm_count
                spot = params.spot
            }
        }
    }
}

process {
    withName: processA {
        queue = 'spammer_pool'
    }
    withName: processB {
        queue = 'spammer_pool'
    }
    withName: processC {
        queue = 'spammer_pool'
    }
    withName: processD {
        queue = 'spammer_pool'
    }


}
